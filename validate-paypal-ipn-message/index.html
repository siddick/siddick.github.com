<!DOCTYPE html>
<html>
  <head>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <link href='https://plus.google.com/103719245554204460362' rel='publisher'>
    <title>Validate PayPal IPN message - Siddick</title>
    <link href='/assets/application-806bac689b9cee2ce8c9ca867ff2ca3d.css' rel='stylesheet'>
    <!--[if lt IE 9]>
      <script src='http://html5shiv.googlecode.com/svn/trunk/html5.js' type='text/javascript'>
    <![endif]-->
  </head>
  <body>
    <header>
      <div class='navbar navbar-static-top'>
        <div class='navbar-inner'>
          <div class='container'>
            <div class='social-icons pull-right'>
              <a href='https://github.com/siddick'>
                <span class='icon-github'></span>
              </a>
              <a href='https://twitter.com/siddickInside'>
                <span class='icon-twitter'></span>
              </a>
              <a href='http://www.facebook.com/siddick'>
                <span class='icon-facebook'></span>
              </a>
            </div>
            <ul class='nav'>
              <li>
                <a class='logo' title='Siddick'>
                  <i class='icon-strikethrough icon-large'></i>
                </a>
              </li>
              <li class=""><a href="/">Home</a></li>
              <li class=""><a href="/about/">About</a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>
    <div class='container'>
      <div class='content'>
        <header class='page-header'>
          <h1>
            <span class='icon-code pull-right'></span>
            Validate PayPal IPN message
          </h1>
        </header>
        <article>
          <p>
            Using
            <a href='https://github.com/paypal/sdk-core-ruby'>paypal-sdk-core</a>
            gem to validate PayPal IPN message.
          </p>
          <div class="CodeRay">
            <div class="code"><pre>require <span class="string"><span class="delimiter">&quot;</span><span class="content">paypal-sdk-core</span><span class="delimiter">&quot;</span></span>&#x000A;<span class="constant">PayPal</span>::<span class="constant">SDK</span>.configure( <span class="symbol">:mode</span> =&gt; <span class="symbol">:sandbox</span> )&#x000A;<span class="keyword">if</span> <span class="constant">PayPal</span>::<span class="constant">SDK</span>::<span class="constant">Core</span>::<span class="constant">API</span>::<span class="constant">IPN</span>.valid?(<span class="string"><span class="delimiter">&quot;</span><span class="content">IPN message to validate</span><span class="delimiter">&quot;</span></span>)&#x000A;  print <span class="string"><span class="delimiter">&quot;</span><span class="content">IPN message is valid</span><span class="delimiter">&quot;</span></span>&#x000A;<span class="keyword">end</span>&#x000A;</pre></div>
          </div>
          <p>To configure live mode</p>
          <div class="CodeRay">
            <div class="code"><pre><span class="constant">PayPal</span>::<span class="constant">SDK</span>.configure( <span class="symbol">:mode</span> =&gt; <span class="symbol">:live</span> )&#x000A;</pre></div>
          </div>
          <p>Validate IPN message received by rails app</p>
          <div class="CodeRay">
            <div class="code"><pre>ipn_message = request.raw_post  <span class="comment"># raw post data send by PayPal IPN</span>&#x000A;<span class="keyword">if</span> <span class="constant">PayPal</span>::<span class="constant">SDK</span>::<span class="constant">Core</span>::<span class="constant">API</span>::<span class="constant">IPN</span>.valid?(ipn_message)&#x000A;  print <span class="string"><span class="delimiter">&quot;</span><span class="content">IPN message is valid</span><span class="delimiter">&quot;</span></span>&#x000A;<span class="keyword">end</span></pre></div>
          </div>
        </article>
        <div class="fb-comments" data-width="700" data-href="http://siddick.com/validate-paypal-ipn-message/"></div>
      </div>
    </div>
    <div id='fb-root'></div>
    <script id='facebook-jssdk' src='http://connect.facebook.net/en_US/all.js#xfbml=1&amp;appId=369626729746568'></script>
  </body>
</html>
